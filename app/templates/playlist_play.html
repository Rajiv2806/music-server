{% extends 'base.html' %}

{% block extra_head %}
    <script type="text/javascript" src="{{ url_for('static', filename='js/cplayer.js') }}"></script>
{% endblock extra_head %}

{% block content %}

<hr class="invisible">
<h1>now playing - {{ playlist.title }}</h1>
<hr class="invisible">
<div id="player">
</div>


<script>
    let player = new cplayer({
        element: document.getElementById("player"),
        big: true,
        shadowDom: false,
        autoplay: true,
        showPlaylist: true,
        playlist:[
            {% for track in playlist.tracks %}
            {% if track.is_cached() %}
            {
                src: "{{ url_for('static', filename='track_cache/'+track.id+'.mp3') }}",
                poster: "",
                name: "{{ track.title }}",
                artist: "",
                lyric: "",
                sublyric: "",
                album: "",
            },
            {% endif %}
            {% endfor %}
        ] 
    })
</script>

{% endblock content%}
